<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>注册</title>
		<link rel="stylesheet" href="css/animate.css" />
		<link rel="stylesheet" href="css/reset.css" />
		<style>
			*{margin: 0;padding: 0;}
			body{
				width: 1200px;
			}	
			#action{
	  		width: 400px;
	  		height: 400px;
	  		border: 1px solid #000; 
	  		background: #CCCCCC; 
	  		margin: 30px auto;		
		  	}
		  	#action h2{
		  		font-size: 16px;
		  		margin: 15px 160px;
		  		color: #FF0000;
		  	}
		  	#username input{
		  		width: 300px;
		  		height: 40px;
		  		margin: 20px 47px;
		  	}
		  	#password{
		  		width: 300px;
		  		height: 40px;
		  		margin: 20px 47px 0 47px;
		  	}
		  	.has-error{
		  		display: block;
		  	}
		  	form span{
		  		display: none;
		  		margin-left: 47px;
		  	}
		  	#sub input{
		  		width: 300px;
		  		height: 40px;
		  		margin: 20px 47px;
		  		background-color: #FF0000;
		  	}
		</style>
	</head>
	<body>
		<div id="header">
			<img src="img/TB16.jpg"/>
		</div>
		<div id="nav">
			<span>欢迎来到一淘网，阿里巴巴旗下生活省钱利器！</span>
			<p><a href="register.html" name="register" class="register">免费注册</a></p>
			<p><a href="login.html" name="login" class="login">登录</a></p>
			<p><a href="cart.html">购物车</a></p>
			<p><a href="list.html">热门商品</a></p>
			<p><a href="order.html">我的订单</a></p>
			<p><a href="#" name="username" class="username">asdfghjkl1</a></p>
			<p><a href="javascript:localStorage.clear(); location.reload();" class="logout">退出</a></p>
		</div>	
		<script type="text/javascript" src="js/myajax.js" ></script>
		<script>
      //判断用户名如果存在, 则显示用户名并显示退出按钮, 否则显示注册和登录
      if (localStorage.username) {
        var oUsername = document.querySelector('a[name=username]');
        var oLogout = document.querySelector('.logout');
        oUsername.innerText = localStorage.username;
        oUsername.style.display = 'inline';
        oLogout.style.display = 'inline';
      } else {
        var oRegister = document.querySelector('.register');
        var oLogin = document.querySelector('.login');
        oRegister.style.display = 'inline';
        oLogin.style.display = 'inline';
      }
      </script>
      <script>
       /*var oSearch = document.querySelector("#search");	
	   var oOne=document.querySelector('#search-one');   
	    oSearch.onkeyup =function(event) {
	      if (event.keyCode === 13) {
	        location.href = 'search.html?search_text='+this.value;
	      }
	      var self=this;
	      oOne.onclick=function(event){
	      	 location.href = 'search.html?search_text='+self.value;
	    	}
	    }*/
    </script>
  		<main id="action">
		  	<h2>用户注册</h2>
		    <div id="username"><input type="text" name="username" placeholder="请输入用户名"></div>
		    <form>
		    	<input type="password" name="password" placeholder="请输入密码" id="password">
		    	<span id="error-message" class="">密码长度为6-18位</span>
		    </form>
		    <div id="sub"><input type="submit" value="注册"></div>
		 </main>
		<script>
			var oPassword = document.getElementById('password');
		    var oErrorMessage = document.getElementById('error-message');
		    var reg = /^\w{6,18}$/;
		    oPassword.onblur = function(){
		      var password = this.value;
		      if (reg.test(password)) {
		        oErrorMessage.className = '';
		      } else {
		        oErrorMessage.className = 'has-error';
		      }
		    }
			var oUsername = document.querySelector('input[name=username]');
			var oPassword = document.querySelector('input[name=password]');
			var oSubmit = document.querySelector('input[type=submit]');
			oSubmit.onclick = function () {
				myajax.post('http://h6.duchengjiu.top/shop/api_user.php',{
					status:"register",
					username:oUsername.value,
					password:oPassword.value
				},function(err,responseText) {
					var json = JSON.parse(responseText);
					console.log(json);
				});		
			}
		</script>
	</body>
</html>
