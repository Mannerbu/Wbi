<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/animate.css" />
		<link rel="stylesheet" href="css/carousel.css" />
	</head>
	<body>
		<div id="header">
			<img src="img/TB16.jpg"/>
		</div>
		<div id="nav">
			<span>欢迎来到一淘网，阿里巴巴旗下生活省钱利器！</span>
			<p><a href="register.html">免费注册</a></p>
			<p><a href="login.html">登录</a></p>
			<p><a href="cart.html">购物车</a></p>
			<p><a href="list.html">热门商品</a></p>
			<p><a href="order.html">我的订单</a></p>
			<p><a href="#" name="username" class="username">asdfghjkl1</a></p>
			<p><a href="javascript:localStorage.clear(); location.reload();" class="logout">退出</a></p>
		</div>
		<div id="box">
			<p><img src="img/TB1320.png" style="float: right"/></p>
			<a href="index.html"><img src="img/T-220.png"/></a>
			<div class="box2">
				<input type="button" id="search-one" value="搜索" />
				<input id="search" type="text" placeholder="请输入要搜索的内容">
				<ul>
				<li><a href="#">手机</a></li>
				<li><a href="#">棒球服</a></li>
				<li><a href="#">妈妈装</a></li>
				<li><a href="#">假两件</a></li>
				<li><a href="#">女外搭</a></li>
				<li><a href="#">雪纺衬衫</a></li>
				<li><a href="#">老年手机</a></li>
				<li><a href="#">女开衫</a></li>
				<li><a href="#">长袖衬衫</a></li>
				<li><a href="#">毛针长衫</a></li>
			</ul>
			</div>
		</div>
		<div id="banner">
			<ul>
				<li><a href="#" >首页</a></li>
				<li><a href="#">品牌特卖</a></li>
				<li><a href="#">限时闪购</a></li>
			</ul>
		</div>
	  		<ul id="cat" class="cat"></ul>  
		<div id="brand">
			<div class="box3">
				
			<div class="box-fun">
				<div id="carousel" class="carousel">
			    <div id="m_unit" class="m_unit">
			      <ul>
			        <li><a href=""><img src="img/TB1z0-340.jpg" alt=""></a></li>
			        <li><a href=""><img src="img/TB50-340.jpg" alt=""></a></li>
			      </ul>
			    </div>
			    <div class="btns">
			      <a href="javascript:" class="leftBtn" id="leftBtn"></a>
			      <a href="javascript:" class="rightBtn" id="rightBtn"></a>
			    </div>
			    <div class="circles" id="circles">
			      <ol>
			        <li class="current"></li>
			        <li></li>
			      </ol>
			    </div>
			  </div>

			</div>
			<div class="box-right">
				<p class="box-top"><img src="img/TB170-70.png" /></p>
				<p class="ci">立即登录，立刻省钱</p>
				<ul>
					<li><a href="login.html">用户登录</a></li>
					<li><a href="register.html">新用户注册</a></li>
				</ul>
				<p class="center"><img src="img/TB1tv-36.png"/></p>
				<p class="box-bo"><img src="img/TB1v.png"/></p>
			</div>
		</div>
		</div>
		<div id="nav-list">
			<img src="img/TB1E0.png" />
		</div>
		<a href="javascript:;" class="backtotop" id="backtotop">回到顶部</a>
		<script type="text/javascript" src="js/backtotop.js" ></script>
		<script>
			var backtotop = new BackToTop("#backtotop");
		</script>
	
		<script type="text/javascript" src="js/myajax.js" ></script>
		<script type="text/javascript" src="js/animate.js" ></script>
		 <script>
		 	var mainNav =document.querySelector('');
			var topDis = getAllTop(mainNav);
			window.onscroll = function(e) {
			  var nowTop = document.documentElement.scrollTop || document.body.scrollTop;
			  if(nowTop >= topDis) {
			    mainNav.style.position = 'fixed';
			    mainNav.style.marginTop = 0;
			  }else {
			    mainNav.style.position = 'relative';
			    mainNav.style.marginTop = topDis + 'px';
			  }
			};
			
			function getAllTop(obj) {
			  var allTop = obj.offsetTop;
			  while(obj = obj.offsetParent) {
			    allTop += obj.offsetTop;
			  }
			  return allTop;
			}
		 </script>  
		 <script>
		 	var oCarousel = document.querySelector('#carousel');
		    var oLeftBtn = document.querySelector('#leftBtn');
		    var oRightBtn = document.querySelector('#rightBtn');
		    var oCirclesLi = document.querySelector("#circles").querySelectorAll('li');
		    var oMUnit = document.querySelector("#m_unit");
		    var oUl = oMUnit.querySelector('ul');
		    var oLi = oUl.querySelectorAll('li');
		
		    var imgLength = oLi.length;
		    var width = 750;
		    var animatetime = 600;
		    var tweenString = "BounceEaseOut";
		    var interval = 2000;
		    var lock = true;
		    var index = 0; //0 1 2 3 4
		
		    var timer = setInterval(rightBtnHandler, interval);
		    oCarousel.onmouseover = function(){
		      clearInterval(timer);
		    }
		    oCarousel.onmouseout = function() {
		      timer = setInterval(rightBtnHandler, interval);
		    }
		
		    //把0号li克隆，然后添加到carouseUL的最后
		    oUl.appendChild(oLi[0].cloneNode(true));
		
		    oRightBtn.onclick = rightBtnHandler;
		    oLeftBtn.onclick  = function() {
		      if (oMUnit.isAnimated) return;
		
		      index--;
		      if (index < 0) {
		        index = imgLength - 1;
		        oMUnit.style.left = -width * imgLength + 'px';
		      }
		      changeCircles();
		      animate(oMUnit, {"left": -width*index}, animatetime, tweenString);
		    }
		
		    for (var i = 0; i < oCirclesLi.length; i++) {
		      (function(i){
		        oCirclesLi[i].onmouseover = function() {
		          if (oMUnit.isAnimated) return;
		          index = i;
		          changeCircles();
		          animate(oMUnit, {"left": -width*index}, animatetime, tweenString);
		        }
		      })(i);
		    }
		
		    function rightBtnHandler() {
		      //如果本身在运动，则不做任何事
		      if (oMUnit.isAnimated) return;
		
		      index++;
		      changeCircles();
		      animate(oMUnit, {"left":-width*index}, animatetime, tweenString, function(){
		        if (index > imgLength - 1) {
		          index = 0;
		          this.style.left = "0px";
		        }
		      });
		    }
		
		    //更换小圆点
		    function changeCircles() {
		      //n是信号量的副本
		      var n = index;
		      if (n === imgLength) {
		        n = 0;
		      }
		
		      for (var i = 0; i < oCirclesLi.length; i++) {
			        oCirclesLi[i].className = "";
			      }
			      oCirclesLi[n].className = "current";
			    }
		 </script>
		<script>
			if (localStorage.username) {
		        var oUsername = document.querySelector('a[name=username]');
		        var oLogout = document.querySelector('.logout');
		        oUsername.innerText = localStorage.username;
		        oUsername.style.display = 'inline';
		        oLogout.style.display = 'inline';
		      } else {
		        var oRegister = document.querySelector('.register');
		        var oLogin = document.querySelector('.login');
		        oRegister.style.display = 'inline';
		        oLogin.style.display = 'inline';
		      }
		</script>		
	  <script>
	    var oSearch = document.querySelector("#search");
	    var oBtn = document.querySelector('button');
	    var sub=document.querySelector('#search-one');
	    
	    oSearch.onkeyup =function(event) {
	      if (event.keyCode === 13) {
	        location.href = 'search.html?search_text='+this.value;
	      }
	      var self=this;
	      sub.onclick=function(){
	      	 location.href = 'search.html?search_text='+self.value;
	    }
	    }
	  </script>
	  <script>
	  var oCat = document.querySelector('#cat');
	  myajax.get('http://h6.duchengjiu.top/shop/api_cat.php', {}, function(error, responseText){
	      var json = JSON.parse(responseText);//返回的整个json对象
	      var data = json.data;//json对象当中的data是一个数组
	      for (var i = 0; i < data.length; i++) {
	        var obj = data[i];//数组里面的每一项是一个商品分类的对象
	        oCat.innerHTML += `<li><a href="list.html?cat_id=${obj.cat_id}">${obj.cat_name}</a></li>`;
	      }
	  });
	  </script>
		<main>
	  <ul id="hot-goods">
	  </ul>
		</main>
	  <script>
	    var oGoods = document.querySelector('#hot-goods');
	    myajax.get('http://h6.duchengjiu.top/shop/api_goods.php?', {}, function(err,responseText){
	      var json = JSON.parse(responseText);
	      console.log(json);
	      var data = json.data;
	      for (var i = 0; i < data.length; i++) {
	        var obj = data[i];
	        oGoods.innerHTML += `<li><a href="goods.html?goods_id=${obj.goods_id}">
	          <div><img src="${obj.goods_thumb}" /></div>
	          <div class="name">${obj.goods_name}</div>
	          <div class="price">¥${obj.price}</div></a>
	        </li>`;
	      }
	    });
	  </script>
	  <div id="footer">
	  	<dl style="margin-left: 150px;">
	  		<dt>关于我们</dt>
	  		<dd><a href="#">关于一淘</a></dd>
	  		<dd><a href="#">法律声明</a></dd>
	  		<dd><a href="#">诚聘英才</a></dd>
	  		<dd><a href="#">廉政邮箱</a></dd>
	  	</dl>
	  	<dl>
	  		<dt>帮助中心</dt>
	  		<dd><a href="#">新手指南</a></dd>
	  		<dd><a href="#">关于返利</a></dd>
	  		<dd><a href="#">关于集分宝</a></dd>
	  		<dd><a href="#">关于会员 特权</a></dd>
	  		<dd><a href="#">联系客户</a></dd>
	  	</dl>
	  	<dl>
	  		<dt>手机一淘</dt>
	  		<dd><a href="#"><img src="img/TB3.png"/></a></dd>
	  	</dl>
	  	<dl>
	  		<dt>优惠地图</dt>
	  		<dd><a href="#">品牌特惠</a></dd>
	  		<dd><a href="#">限时闪购</a></dd>
	  	</dl>
	  	<dl>
	  		<dt>商家合作</dt>
	  		<dd><a href="#">报名入口</a></dd>
	  		<dd><a href="#">商家端问题</a></dd>
	  	</dl>
	  	<div class="foot">
	  		<ul>
	  			<li><a href="#">阿里巴巴集团</a></li>
	  			<li><a href="#">淘宝网</a></li>
	  			<li><a href="#">天猫</a></li>
	  			<li><a href="#">全球速卖通</a></li>
	  			<li><a href="#">阿里巴巴国际交易市场</a></li>
	  			<li><a href="#">1688</a></li>
	  			<li><a href="#">阿里妈妈</a></li>
	  			<li><a href="#">阿里旅行▪去吧</a></li>
	  			<li><a href="#">阿里云计算</a></li>
	  			<li><a href="#">YunOS</a></li>
	  			<li><a href="#">阿里通信</a></li>
	  			<li><a href="#">万网</a></li>
	  			<li><a href="#">高德</a></li>
	  			<li><a href="#">优视</a></li>
	  			<li><a href="#">友盟</a></li>
	  			<li><a href="#">酷盘</a></li>
	  			<li><a href="#">虾米</a></li>
	  			<li><a href="#">天天动听</a></li>
	  			<li><a href="#">来往</a></li>
	  			<li><a href="#">钉钉</a></li>
	  			<li><a href="#">11 Main</a></li>
	  			<li><a href="#">虾支付宝</a></li>
	  		</ul>
	  		<div class="foot-foot">
	  			<p>Copyright © 2010-2017 ETAO.COM 版权所有</p>
	  			<p>增值电信业务经营许可证：浙B2-20080224</p>
	  		</div>
	  		
	  	</div>
	  </div>
	</body>
</html>
