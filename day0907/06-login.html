<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<input type="text" name="username" placeholder="请输入用户名">
	  	<input type="password" name="password" placeholder="请输入密码">
	  	<input type="button" value="登录">
	 	<script type="text/javascript" src="js/myajax.js" ></script>
	  	<script>
		    var oUsername = document.querySelector('input[name=username]');
		    var oPassword = document.querySelector('input[name=password]');
		    var oBtn = document.querySelector('input[type=button]');
		    oBtn.onclick = function() {
		      //js校验
		      //直接调用登录的接口
		      function fetchComputedStyle(obj, property) {
			  if (window.getComputedStyle) {
			    property = property.replace(/[A-Z]/g, function(match){
			      return '-' + match.toLowerCase();
			    });
			    return window.getComputedStyle(obj)[property]; //中括号里面可以是变量
			  } else {
			    property = property.replace(/-([a-z])/g, function(match, $1){
			      return $1.toUpperCase();
			    });
			    return obj.currentStyle[property];
			  }
			}
		      myajax.post('http://h6.duchengjiu.top/shop/api_user.php',
		      {
		        status: 'login',
		        username: oUsername.value,
		        password: oPassword.value
		      }, function(error, responseText){
		        var json = JSON.parse(responseText);
		        console.log(json);
		        localStorage.token = json.data.token;
		        localStorage.username = json.data.username;
		        console.log(localStorage.token);
		        console.log(localStorage.username);
		      });
		    }
	 	</script>
	</body>
</html>
